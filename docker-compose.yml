# Modulo: infraestrutura
# Arquivo: docker-compose.yml
# Funcao no sistema: compose raiz para subir o backend na porta interna 3001.

services:
  backend:
    container_name: cjm_backend
    build:
      context: ./backend
      dockerfile: Dockerfile
    image: cjm-patrimonio-backend:latest
    restart: unless-stopped
    ports:
      - "${BACKEND_HOST_PORT:-3001}:3001"
    environment:
      PORT: "3001"
      NODE_ENV: "production"
      DB_SSL: "${DB_SSL:-require}"
      FRONTEND_ORIGIN: "${FRONTEND_ORIGIN:-*}"
      DATABASE_URL: "${DATABASE_URL:-postgresql://<user>:<password>@<host>:5432/<database>}"
